# Ozbend_JewelryRender v2


Установка
-

- Скачать zip-файл с дистрибутивом
- В Blender: User Preferences - Add-ons - Install from File - указать скачанный архив


Использование
-

1. Рядом с сохраненным файлом сцены должен лежать файй с настройками options.json

    Поля заполняются следующим образом:

    "resolution_x", "resolution_y": разрешение итогового рендера

    "samples": самплинг итогового рендера

    "source_obj_dir": полный путь к директории с файлами *.obj

    "rendered_obj_dir": полный путь к директории в которую будут перемещены *.obj после обработки

    "dest_dir": полный путь к директории, в которую будут сохранены готовые рендеры

    "correction":

    - "scale": указание масштаба, который будет пременен к мешам, полученным из  *.obj передр рендером
    - "translate": указание смещения, который будет пременен к мешам, полученным из  *.obj передр рендером
    - "rotate": указание поворота, который будет пременен к мешам, полученным из  *.obj передр рендером

    "gravi_mesh_name": имя меша-гравировки в файле *.obj

    Файл с настройками редактируется, как обычный текстовый файл.

2. После установки аддона, в Blender в панели Render появляется дополнительная подпанель JewelryRender2

    Нажатие на кнопку Serial Material Render в этой панели запускает обработку файлов *.obj


Создание материалов в сцене
-
Каждый созданный в сцене материал должен иметь в своем имени идентификатор:

Первые 5 символов имени отводятся под идентификатор: 3 буквы, 2 цифры.

Например: MET01_Gold. Здесь MET01 - идентификатор. После пятого символа могут идти любые уточнения для удобства.

Также каждый материал сцены должен иметь фейкового юзера, чтобы отличать их от загруженных при импорте obj.

Каждый материал в сцене, который может быть назначен на меш с гравировкой, должен иметь связку соответствующих нодов для подключения и отключения текстуры гравировки. Микс-нод с именем "Gravi_Mix", который смешивает два материала - основной и материал гравировки по маске текстуры гравировки. Нод с текстурой (подключается на вход Factor микс-нода) с именем "Gravi_Text".

Имя текстуры гравировки должно совпадать с именем obj файла. Расширение png.

Коррекция размеров и положения импортированного меша
-
Значения масштаба задаются в относительных единицах

Значения смещения задаются в единицах сцены.

Значения углов поворота задаются в градусах.

Определение материалов в импортируемом obj
-
Имена всех мешей в obj файле должны начинаться с идентификатора материала. Идентификатор такой же, как для материалов сцены: 3 символа обозначают материал + 2 символа обозначают его номер. Например "Met33".

Для меша с гравировкой после пяти символов материала идут еще 5 символов его специального идентификатора "Gravi". Например "Met01Gravi". После этого идут еще 2 символа - номер текстуры для гравировки.

Пример полного имени меша с гравировкой: Met01Gravi01 

Если номер материала в идентификаторе равен "00" - это меш с переменным материалом. Если номер не нулевой - это меш с постоянным материалом.

# Текстуры гравировки

Имя текстуры должно совпадать с именем файла *.obj. Плюс номер текстуры для гравировки.

Если импортируемый файл имеет имя Ring.obj, текстура для гравировки должна иметь имя Ring01.obj при наличии в сцене меша с гравировкой с именем Met00Gravi01.

Даже если текстура гравировки одна, и меш с гравировкой и текстура должны иметь номер 01.
